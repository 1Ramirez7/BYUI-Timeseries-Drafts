{
  "hash": "a490f26187a6ca957361e2efd5c2db8e",
  "result": {
    "markdown": "---\ntitle: \"Decomposition of Time Series\"\nsubtitle: \"Chapter 1: Lesson 4\"\nformat: html\neditor: source\nsidebar: false\n---\n\n\n\n```{=html}\n<script type=\"text/javascript\">\n function showhide(id) {\n    var e = document.getElementById(id);\n    e.style.display = (e.style.display == 'block') ? 'none' : 'block';\n }\n \n function openTab(evt, tabName) {\n    var i, tabcontent, tablinks;\n    tabcontent = document.getElementsByClassName(\"tabcontent\");\n    for (i = 0; i < tabcontent.length; i++) {\n        tabcontent[i].style.display = \"none\";\n    }\n    tablinks = document.getElementsByClassName(\"tablinks\");\n    for (i = 0; i < tablinks.length; i++) {\n        tablinks[i].className = tablinks[i].className.replace(\" active\", \"\");\n    }\n    document.getElementById(tabName).style.display = \"block\";\n    evt.currentTarget.className += \" active\";\n }    \n</script>\n```\n\n\n## Learning Outcomes\n\n<details>\n<summary>Decompose time series into trends, seasonal variation, and residuals</summary>\n    -   Obtain residuals as difference between original series and trend + seasonal estimates\n</details>\n<details>\n<summary>Use R to describe key features of time series data</summary>\n    -   Remove seasonal variation of a time series\n</details>\n<details>\n<summary>Explain the key theoretical concepts of time series decomposition</summary>\n    -   Explain how to remove seasonal variation using an estimate for seasonal component of a time series\n</details>\n\n\n\n## Preparation\n\n-   Read Sections 1.5.4-1.5.5 and 1.6\n\n\n## Learning Journal Exchange (10 min)\n\n-   Review another student's journal\n-   What would you add to your learning journal after reading your partner's?\n-   What would you recommend your partner add to their learning journal?\n-   Sign the Learning Journal review sheet for your peer\n\n\n\n\n\n\n<!-- ## Random walks (5-10 min) -->\n\n<!-- ```          -->\n<!-- -   Definition of a random walk -->\n<!-- -   Example: tossing a coin and moving left or right one integer on a number line -->\n<!-- ``` -->\n\n<!-- ::: callout-solution -->\n<!-- Please add simulation of random walk here -->\n<!-- ::: -->\n\n\n\n\n\n\n<!-- ## When to use additive vs. multiplicative decomposition (5 min) -->\n\n<!-- -   Additive: Constant variance -->\n<!-- -   Multiplicative: Variance grows with the value of the time series -->\n\n\n## Converting from a data file to a tsibble (5 min)\n\nThis is a demonstration of two ways to convert an Excel \nor csv data file to a tsibble.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_df <- rio::import(\"../data/traffic_deaths.xlsx\")\n\n# Method 1: Create date from scratch based on pattern of rows\n# This only works if the data are in ascending order with no missing values\n# Note: This file is not in the right order, so this code gives the wrong tsibble\n# unless you sort the Excel file before proceeding.\nstart_date <- lubridate::ymd(\"2017-01-01\")\ndate_seq <- seq(start_date,\n                start_date + months(nrow(deaths_df)-1),\n                by = \"1 months\")\ndeaths_tibble <- tibble(\n  dates = date_seq,\n  year = lubridate::year(date_seq),\n  month = lubridate::month(date_seq),\n  value = pull(deaths_df, Deaths)\n)\n\n# Method 2: Build using the date information in the Excel file\ndeaths_tibble <- deaths_df |>\n  mutate(\n    date_str = paste(\"1\", Month, Year),\n    dates = dmy(date_str),\n    year = lubridate::year(dates),\n    month = lubridate::month(dates),\n    value = Deaths\n  ) |>\n  dplyr::select(dates, year, month, value)  |> \n  tibble()\n\n# Create the index variable and convert to a tsibble\ndeaths_ts <- deaths_tibble |>\n  mutate(index = tsibble::yearmonth(dates)) |>\n  as_tsibble(index = index) |>\n  dplyr::select(index, dates, year, month, value) |>\n  rename(deaths = value) # rename value to emphasize data context\n```\n:::\n\n\nThis results in a tsibble. The first few rows are given here:\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tsibble: 6 x 5 [1M]\n     index dates       year month deaths\n     <mth> <date>     <dbl> <dbl>  <dbl>\n1 2017 Jan 2017-01-01  2017     1   3034\n2 2017 Feb 2017-02-01  2017     2   2748\n3 2017 Mar 2017-03-01  2017     3   3164\n4 2017 Apr 2017-04-01  2017     4   3238\n5 2017 May 2017-05-01  2017     5   3416\n6 2017 Jun 2017-06-01  2017     6   3492\n```\n:::\n:::\n\n\n## Data Visualizations (5 min)\n\nThe following time plot illustrates the data in this time series.\n\n### Time Series Plot: Default y-axis\n\n::: {.cell}\n\n```{.r .cell-code}\nautoplot(deaths_ts, .vars = deaths) +  \n  labs(\n    x = \"Month\",\n    y = \"Traffic Fatalities\",\n    title = \"Traffic Fatalities in the United States (by Month)\"\n  ) +\n  theme(plot.title = element_text(hjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](chapter_1_lesson_4_class_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-tip icon=false title=\"Check Your Understanding\"}\n\n-   What do you notice?\n    -   Does it seem like there is a trend in the time series?\n    -   Is there evidence of a seasonal effect? If so, when is the number of fatalities particularly high? particularly low?\n\n:::\n\n### Time Series Plot: Adjusted y-axis\n\nThe vertical axis was adjusted in this plot, so it would begin at 0.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nautoplot(deaths_ts, .vars = deaths) +\n  labs(\n    x = \"Month\",\n    y = \"Traffic Fatalities\",\n    title = \"Traffic Fatalities in the United States (by Month)\"\n  ) +\n  coord_cartesian(ylim = c(0,4500)) +\n  theme(plot.title = element_text(hjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](chapter_1_lesson_4_class_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-tip icon=false title=\"Check Your Understanding\"}\n\n-   Which of the two time plots above is superior? Why?\n\n:::\n\n#### Visualization of Seasonal Effect\n\nThese side-by-side box plots illustrate the seasonal effect present in the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(deaths_ts, aes(x = factor(month), y = deaths)) +\n    geom_boxplot() +\n  labs(\n    x = \"Month Number\",\n    y = \"Deaths\",\n    title = \"Boxplots of Traffic Deaths by Month\"\n  ) +\n  theme(plot.title = element_text(hjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](chapter_1_lesson_4_class_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-tip icon=false title=\"Check Your Understanding\"}\n\n-   How do the positions of the box plots correspond to the times of the year where you noted more (or less) deaths occurring?\n\n:::\n\n## Computing the Seasonally Adjusted Series (40 min)\n\nOur objective is to find an estimate for the time series that does not fluctuate with the seasons. This is called the seasonally adjusted series.\n\n### Centered Moving Average\n\nFirst, we compute the centered moving average, $\\hat m_t$. This computation was explored in detail in the previous lesson. \nTo emphasize the computation of the centered moving average, the observed data values that were used to find $\\hat m_t$ for December 2017 are shown in <span style=\"color:#009E73;\">breen</span>. \n\nThe centered moving average, $\\hat m_t$, is then used to compute the monthly additive effect, $\\hat s_t$:\n\n$$\n  \\hat s_t = x_t - \\hat m_t\n$$\n\nIf we compute the mean of $\\hat s_t$ for all values for which it is defined, we get a value that is reasonably close to 0, but not exactly zero. We adjust this by subtracting the mean from $\\hat s_t$ to get the seasonally adjusted mean:\n\n$$\n  \\bar s_t = \\hat s_t - \\bar {\\hat s_t}\n$$\n\nFinally, we compute the seasonally adjusted series by subtracting $\\bar s_t$ from each of the observed values:\n\n$$\n  \\text{seasonally adjusted series} = x_t - \\bar s_t\n$$\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeaths_ts <- deaths_ts |> \n  mutate(\n    m_hat = (\n          (1/2) * lag(deaths, 6)\n          + lag(deaths, 5)\n          + lag(deaths, 4)\n          + lag(deaths, 3)\n          + lag(deaths, 2)\n          + lag(deaths, 1)\n          + deaths\n          + lead(deaths, 1)\n          + lead(deaths, 2)\n          + lead(deaths, 3)\n          + lead(deaths, 4)\n          + lead(deaths, 5)\n          + (1/2) * lead(deaths, 6)\n        ) / 12\n  )\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;\"> index </th>\n   <th style=\"text-align:center;\"> month </th>\n   <th style=\"text-align:center;\"> deaths </th>\n   <th style=\"text-align:center;\"> m_hat </th>\n   <th style=\"text-align:center;\"> s_hat </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Jan </td>\n   <td style=\"text-align:center;\"> 1 </td>\n   <td style=\"text-align:center;\"> 3034 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Feb </td>\n   <td style=\"text-align:center;\"> 2 </td>\n   <td style=\"text-align:center;\"> 2748 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Mar </td>\n   <td style=\"text-align:center;\"> 3 </td>\n   <td style=\"text-align:center;\"> 3164 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Apr </td>\n   <td style=\"text-align:center;\"> 4 </td>\n   <td style=\"text-align:center;\"> 3238 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 May </td>\n   <td style=\"text-align:center;\"> 5 </td>\n   <td style=\"text-align:center;\"> 3416 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Jun </td>\n   <td style=\"text-align:center;\"> 6 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3492</span> </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Jul </td>\n   <td style=\"text-align:center;\"> 7 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3730</span> </td>\n   <td style=\"text-align:center;\"> 3351.6 </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Aug </td>\n   <td style=\"text-align:center;\"> 8 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3409</span> </td>\n   <td style=\"text-align:center;\"> 3350 </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Sep </td>\n   <td style=\"text-align:center;\"> 9 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3572</span> </td>\n   <td style=\"text-align:center;\"> 3343.2 </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Oct </td>\n   <td style=\"text-align:center;\"> 10 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3629</span> </td>\n   <td style=\"text-align:center;\"> 3326.2 </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Nov </td>\n   <td style=\"text-align:center;\"> 11 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3408</span> </td>\n   <td style=\"text-align:center;\"> 3316.5 </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Dec </td>\n   <td style=\"text-align:center;\"> 12 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3391</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3318.6</span> </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 Jan </td>\n   <td style=\"text-align:center;\"> 1 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3010</span> </td>\n   <td style=\"text-align:center;\"> 3312.1 </td>\n   <td style=\"text-align:center;\"> -302.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 Feb </td>\n   <td style=\"text-align:center;\"> 2 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">2734</span> </td>\n   <td style=\"text-align:center;\"> 3308 </td>\n   <td style=\"text-align:center;\"> -574 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 Mar </td>\n   <td style=\"text-align:center;\"> 3 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3015</span> </td>\n   <td style=\"text-align:center;\"> 3311.7 </td>\n   <td style=\"text-align:center;\"> -296.7 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 Apr </td>\n   <td style=\"text-align:center;\"> 4 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">2979</span> </td>\n   <td style=\"text-align:center;\"> 3313.2 </td>\n   <td style=\"text-align:center;\"> -334.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 May </td>\n   <td style=\"text-align:center;\"> 5 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3443</span> </td>\n   <td style=\"text-align:center;\"> 3307.8 </td>\n   <td style=\"text-align:center;\"> 135.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 Jun </td>\n   <td style=\"text-align:center;\"> 6 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #009E73 !important;\">3514</span> </td>\n   <td style=\"text-align:center;\"> 3292.4 </td>\n   <td style=\"text-align:center;\"> 221.6 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 Jul </td>\n   <td style=\"text-align:center;\"> 7 </td>\n   <td style=\"text-align:center;\"> 3552 </td>\n   <td style=\"text-align:center;\"> 3281.1 </td>\n   <td style=\"text-align:center;\"> 270.9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 Aug </td>\n   <td style=\"text-align:center;\"> 8 </td>\n   <td style=\"text-align:center;\"> 3490 </td>\n   <td style=\"text-align:center;\"> 3270.2 </td>\n   <td style=\"text-align:center;\"> 219.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 Sep </td>\n   <td style=\"text-align:center;\"> 9 </td>\n   <td style=\"text-align:center;\"> 3579 </td>\n   <td style=\"text-align:center;\"> 3259.5 </td>\n   <td style=\"text-align:center;\"> 319.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 Oct </td>\n   <td style=\"text-align:center;\"> 10 </td>\n   <td style=\"text-align:center;\"> 3657 </td>\n   <td style=\"text-align:center;\"> 3261.2 </td>\n   <td style=\"text-align:center;\"> 395.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 Nov </td>\n   <td style=\"text-align:center;\"> 11 </td>\n   <td style=\"text-align:center;\"> 3250 </td>\n   <td style=\"text-align:center;\"> 3264.2 </td>\n   <td style=\"text-align:center;\"> -14.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 Dec </td>\n   <td style=\"text-align:center;\"> 12 </td>\n   <td style=\"text-align:center;\"> 3181 </td>\n   <td style=\"text-align:center;\"> 3260.5 </td>\n   <td style=\"text-align:center;\"> -79.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 Jan </td>\n   <td style=\"text-align:center;\"> 1 </td>\n   <td style=\"text-align:center;\"> 2948 </td>\n   <td style=\"text-align:center;\"> 3256.7 </td>\n   <td style=\"text-align:center;\"> -308.7 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 Feb </td>\n   <td style=\"text-align:center;\"> 2 </td>\n   <td style=\"text-align:center;\"> 2535 </td>\n   <td style=\"text-align:center;\"> 3262.1 </td>\n   <td style=\"text-align:center;\"> -727.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 Mar </td>\n   <td style=\"text-align:center;\"> 3 </td>\n   <td style=\"text-align:center;\"> 2956 </td>\n   <td style=\"text-align:center;\"> 3267.1 </td>\n   <td style=\"text-align:center;\"> -311.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 Apr </td>\n   <td style=\"text-align:center;\"> 4 </td>\n   <td style=\"text-align:center;\"> 3079 </td>\n   <td style=\"text-align:center;\"> 3259.3 </td>\n   <td style=\"text-align:center;\"> -180.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 May </td>\n   <td style=\"text-align:center;\"> 5 </td>\n   <td style=\"text-align:center;\"> 3417 </td>\n   <td style=\"text-align:center;\"> 3254 </td>\n   <td style=\"text-align:center;\"> 163 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 Jun </td>\n   <td style=\"text-align:center;\"> 6 </td>\n   <td style=\"text-align:center;\"> 3449 </td>\n   <td style=\"text-align:center;\"> 3257 </td>\n   <td style=\"text-align:center;\"> 192 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 Jul </td>\n   <td style=\"text-align:center;\"> 7 </td>\n   <td style=\"text-align:center;\"> 3527 </td>\n   <td style=\"text-align:center;\"> 3256.7 </td>\n   <td style=\"text-align:center;\"> 270.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 Aug </td>\n   <td style=\"text-align:center;\"> 8 </td>\n   <td style=\"text-align:center;\"> 3645 </td>\n   <td style=\"text-align:center;\"> 3269 </td>\n   <td style=\"text-align:center;\"> 376 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 Sep </td>\n   <td style=\"text-align:center;\"> 9 </td>\n   <td style=\"text-align:center;\"> 3543 </td>\n   <td style=\"text-align:center;\"> 3279.1 </td>\n   <td style=\"text-align:center;\"> 263.9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 Oct </td>\n   <td style=\"text-align:center;\"> 10 </td>\n   <td style=\"text-align:center;\"> 3506 </td>\n   <td style=\"text-align:center;\"> 3252.8 </td>\n   <td style=\"text-align:center;\"> 253.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 Nov </td>\n   <td style=\"text-align:center;\"> 11 </td>\n   <td style=\"text-align:center;\"> 3274 </td>\n   <td style=\"text-align:center;\"> 3228 </td>\n   <td style=\"text-align:center;\"> 46 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 Dec </td>\n   <td style=\"text-align:center;\"> 12 </td>\n   <td style=\"text-align:center;\"> 3228 </td>\n   <td style=\"text-align:center;\"> 3248.2 </td>\n   <td style=\"text-align:center;\"> -20.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 Jan </td>\n   <td style=\"text-align:center;\"> 1 </td>\n   <td style=\"text-align:center;\"> 2895 </td>\n   <td style=\"text-align:center;\"> 3294.3 </td>\n   <td style=\"text-align:center;\"> -399.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 Feb </td>\n   <td style=\"text-align:center;\"> 2 </td>\n   <td style=\"text-align:center;\"> 2883 </td>\n   <td style=\"text-align:center;\"> 3340.3 </td>\n   <td style=\"text-align:center;\"> -457.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 Mar </td>\n   <td style=\"text-align:center;\"> 3 </td>\n   <td style=\"text-align:center;\"> 2850 </td>\n   <td style=\"text-align:center;\"> 3384.7 </td>\n   <td style=\"text-align:center;\"> -534.7 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 Apr </td>\n   <td style=\"text-align:center;\"> 4 </td>\n   <td style=\"text-align:center;\"> 2555 </td>\n   <td style=\"text-align:center;\"> 3433.5 </td>\n   <td style=\"text-align:center;\"> -878.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 May </td>\n   <td style=\"text-align:center;\"> 5 </td>\n   <td style=\"text-align:center;\"> 3346 </td>\n   <td style=\"text-align:center;\"> 3481.3 </td>\n   <td style=\"text-align:center;\"> -135.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 Jun </td>\n   <td style=\"text-align:center;\"> 6 </td>\n   <td style=\"text-align:center;\"> 4004 </td>\n   <td style=\"text-align:center;\"> 3514.8 </td>\n   <td style=\"text-align:center;\"> 489.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 Jul </td>\n   <td style=\"text-align:center;\"> 7 </td>\n   <td style=\"text-align:center;\"> 4078 </td>\n   <td style=\"text-align:center;\"> 3549.9 </td>\n   <td style=\"text-align:center;\"> 528.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 Aug </td>\n   <td style=\"text-align:center;\"> 8 </td>\n   <td style=\"text-align:center;\"> 4199 </td>\n   <td style=\"text-align:center;\"> 3567.7 </td>\n   <td style=\"text-align:center;\"> 631.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 Sep </td>\n   <td style=\"text-align:center;\"> 9 </td>\n   <td style=\"text-align:center;\"> 4053 </td>\n   <td style=\"text-align:center;\"> 3590.7 </td>\n   <td style=\"text-align:center;\"> 462.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 Oct </td>\n   <td style=\"text-align:center;\"> 10 </td>\n   <td style=\"text-align:center;\"> 4169 </td>\n   <td style=\"text-align:center;\"> 3672.1 </td>\n   <td style=\"text-align:center;\"> 496.9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 Nov </td>\n   <td style=\"text-align:center;\"> 11 </td>\n   <td style=\"text-align:center;\"> 3757 </td>\n   <td style=\"text-align:center;\"> 3758.2 </td>\n   <td style=\"text-align:center;\"> -1.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 Dec </td>\n   <td style=\"text-align:center;\"> 12 </td>\n   <td style=\"text-align:center;\"> 3550 </td>\n   <td style=\"text-align:center;\"> 3793.8 </td>\n   <td style=\"text-align:center;\"> -243.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 Jan </td>\n   <td style=\"text-align:center;\"> 1 </td>\n   <td style=\"text-align:center;\"> 3414 </td>\n   <td style=\"text-align:center;\"> 3804.8 </td>\n   <td style=\"text-align:center;\"> -390.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 Feb </td>\n   <td style=\"text-align:center;\"> 2 </td>\n   <td style=\"text-align:center;\"> 2792 </td>\n   <td style=\"text-align:center;\"> 3816.6 </td>\n   <td style=\"text-align:center;\"> -1024.6 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 Mar </td>\n   <td style=\"text-align:center;\"> 3 </td>\n   <td style=\"text-align:center;\"> 3492 </td>\n   <td style=\"text-align:center;\"> 3831 </td>\n   <td style=\"text-align:center;\"> -339 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 Apr </td>\n   <td style=\"text-align:center;\"> 4 </td>\n   <td style=\"text-align:center;\"> 3868 </td>\n   <td style=\"text-align:center;\"> 3853.3 </td>\n   <td style=\"text-align:center;\"> 14.7 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 May </td>\n   <td style=\"text-align:center;\"> 5 </td>\n   <td style=\"text-align:center;\"> 4098 </td>\n   <td style=\"text-align:center;\"> 3875.5 </td>\n   <td style=\"text-align:center;\"> 222.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 Jun </td>\n   <td style=\"text-align:center;\"> 6 </td>\n   <td style=\"text-align:center;\"> 4107 </td>\n   <td style=\"text-align:center;\"> 3899.8 </td>\n   <td style=\"text-align:center;\"> 207.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 Jul </td>\n   <td style=\"text-align:center;\"> 7 </td>\n   <td style=\"text-align:center;\"> 4240 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 Aug </td>\n   <td style=\"text-align:center;\"> 8 </td>\n   <td style=\"text-align:center;\"> 4320 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 Sep </td>\n   <td style=\"text-align:center;\"> 9 </td>\n   <td style=\"text-align:center;\"> 4276 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 Oct </td>\n   <td style=\"text-align:center;\"> 10 </td>\n   <td style=\"text-align:center;\"> 4482 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 Nov </td>\n   <td style=\"text-align:center;\"> 11 </td>\n   <td style=\"text-align:center;\"> 3977 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 Dec </td>\n   <td style=\"text-align:center;\"> 12 </td>\n   <td style=\"text-align:center;\"> 3914 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n::: {.callout-tip icon=false title=\"Check Your Understanding\"}\n\n-   Working with your assigned partner, fill in the missing values of $\\hat s_t$ in the table above. \n\n:::\n\n### Seasonally Adjusted Mean\n\nNext, we need to compute the seasonally adjusted mean. This is the mean (across years) of $\\hat s_t$ for each month. To compute this, it can be convenient to organize the values of $\\hat s_t$ in a table, where the columns give the year and the rows give the month.\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;\"> Year </th>\n   <th style=\"text-align:center;\"> Jan </th>\n   <th style=\"text-align:center;\"> Feb </th>\n   <th style=\"text-align:center;\"> Mar </th>\n   <th style=\"text-align:center;\"> Apr </th>\n   <th style=\"text-align:center;\"> May </th>\n   <th style=\"text-align:center;\"> Jun </th>\n   <th style=\"text-align:center;\"> Jul </th>\n   <th style=\"text-align:center;\"> Aug </th>\n   <th style=\"text-align:center;\"> Sep </th>\n   <th style=\"text-align:center;\"> Oct </th>\n   <th style=\"text-align:center;\"> Nov </th>\n   <th style=\"text-align:center;\"> Dec </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> ______ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 </td>\n   <td style=\"text-align:center;\"> -302.1 </td>\n   <td style=\"text-align:center;\"> -574 </td>\n   <td style=\"text-align:center;\"> -296.7 </td>\n   <td style=\"text-align:center;\"> -334.2 </td>\n   <td style=\"text-align:center;\"> 135.2 </td>\n   <td style=\"text-align:center;\"> 221.6 </td>\n   <td style=\"text-align:center;\"> 270.9 </td>\n   <td style=\"text-align:center;\"> 219.8 </td>\n   <td style=\"text-align:center;\"> 319.5 </td>\n   <td style=\"text-align:center;\"> 395.8 </td>\n   <td style=\"text-align:center;\"> -14.2 </td>\n   <td style=\"text-align:center;\"> -79.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 </td>\n   <td style=\"text-align:center;\"> -308.7 </td>\n   <td style=\"text-align:center;\"> -727.1 </td>\n   <td style=\"text-align:center;\"> -311.1 </td>\n   <td style=\"text-align:center;\"> -180.3 </td>\n   <td style=\"text-align:center;\"> 163 </td>\n   <td style=\"text-align:center;\"> 192 </td>\n   <td style=\"text-align:center;\"> 270.3 </td>\n   <td style=\"text-align:center;\"> 376 </td>\n   <td style=\"text-align:center;\"> 263.9 </td>\n   <td style=\"text-align:center;\"> 253.2 </td>\n   <td style=\"text-align:center;\"> 46 </td>\n   <td style=\"text-align:center;\"> -20.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 </td>\n   <td style=\"text-align:center;\"> -399.3 </td>\n   <td style=\"text-align:center;\"> -457.3 </td>\n   <td style=\"text-align:center;\"> -534.7 </td>\n   <td style=\"text-align:center;\"> -878.5 </td>\n   <td style=\"text-align:center;\"> -135.3 </td>\n   <td style=\"text-align:center;\"> 489.2 </td>\n   <td style=\"text-align:center;\"> 528.1 </td>\n   <td style=\"text-align:center;\"> 631.3 </td>\n   <td style=\"text-align:center;\"> 462.3 </td>\n   <td style=\"text-align:center;\"> 496.9 </td>\n   <td style=\"text-align:center;\"> -1.2 </td>\n   <td style=\"text-align:center;\"> -243.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> -390.8 </td>\n   <td style=\"text-align:center;\"> -1024.6 </td>\n   <td style=\"text-align:center;\"> -339 </td>\n   <td style=\"text-align:center;\"> 14.7 </td>\n   <td style=\"text-align:center;\"> 222.5 </td>\n   <td style=\"text-align:center;\"> 207.2 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">Mean</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-350.2</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-695.8</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-370.4</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-344.6</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">96.3</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">277.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">361.9</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">321.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">318.6</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">362.2</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">Adjusted</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">______</span> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n::: {.callout-tip icon=false title=\"Check Your Understanding\"}\n\n-   The table above gives the values of $\\hat s_t$. Fill in the missing values in the first row of table above. (Note you already computed these.)\n-   The second-to-last row (labeled \"Mean\") gives the values of $\\bar s_t$. Fill in the two missing numbers\n-   Compute the mean of the $\\bar s_t$ values. (This number should be relatively close to 0.)\n-   Subtract the mean of the $\\bar s_t$ values from each $\\bar s_t$ to get $\\bar s_t$, the seasonally adjusted mean for month $t$. \n\n:::\n\n\n\n\n### Visualizing the Seasonally Adjusted Series\n\nThis code calculates the seasonally adjusted time series, beginning with the tsibble deaths_ts.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Compute s_hat\ndeaths_ts2 <- deaths_ts |>\n  mutate(s_hat = deaths - m_hat)\n\n# Compute s_bar and the adjusted s_bar\nadj_s_bar_df <- deaths_ts2 |>\n  data.frame() |>\n  group_by(month) |>\n  summarize(s_bar = mean(s_hat, na.rm = TRUE)) |>\n  mutate(s_bar_bar = mean(s_bar)) |>\n  mutate(adjusted_s_bar = s_bar - s_bar_bar) |>\n  dplyr::select(month, adjusted_s_bar, s_bar_bar)\n\n# Get seasonally adjusted time series\nadjusted_ts <- deaths_ts2 |>\n  left_join(adj_s_bar_df, by = join_by(month)) |>\n  mutate(seasonally_adjusted = deaths - adjusted_s_bar) |>\n  dplyr::select(-s_bar_bar)\n```\n:::\n\n\nThe figure below illustrates the original time series (in black), the centered moving average $\\hat m_t$ (in blue), and the seasonally adjusted series (in red).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nautoplot(adjusted_ts, .vars = deaths) +\n  geom_line(aes(x = index, y = seasonally_adjusted), color = \"#D55E00\") +\n  geom_line(aes(x = index, y = m_hat), color = \"#0072B2\") +\n  labs(\n    x = \"Month\",\n    y = \"Traffic Fatalities\",\n    title = \"Traffic Fatalities in the United States (by Month)\"\n  ) +\n  coord_cartesian(ylim = c(0,4500)) +\n  theme(plot.title = element_text(hjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](chapter_1_lesson_4_class_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-tip icon=false title=\"Check Your Understanding\"}\n\n-   Do you observe a trend in the time series?\n    -   What does this trend suggest?\n-   In February 2020, there is a spike in the seasonally adjusted time series. Refer to the values in the original time series to explain why this occurred.\n-   In April 2020, there is a dip in the seasonally adjusted time series. Refer to the values in the original time series to explain why this occurred.\n\n:::\n\n\n\n\n\n\n\n## Recap (5 min)\n\n\n-   Review objectives and key concepts\n-   Clarify questions on course or time series data\n\n\n\n\n## Homework\n\n::: {.callout-note icon=false}\n\n## Chapter 1 Lesson 4\n<!-- ## need to update href link to correct files when we get them -->\n\n<a href=\"https://tbrost.github.io/BYUI-Timeseries-Drafts/Homework/HW1_2.qmd\" download=\"TS_HW_1_4.qmd\"> Download Lesson 4 Homework </a>\n\n:::\n\n\n<!-- Solutions  -->\n\n\n<a href=\"javascript:showhide('Solutions')\"\nstyle=\"font-size:.8em;\">Team Activity: Computational Practice</a>\n\n::: {#Solutions style=\"display:none;\"}\n\nSolutions for the computations from this lesson\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;\"> index </th>\n   <th style=\"text-align:center;\"> dates </th>\n   <th style=\"text-align:center;\"> year </th>\n   <th style=\"text-align:center;\"> month </th>\n   <th style=\"text-align:center;\"> deaths </th>\n   <th style=\"text-align:center;\"> m_hat </th>\n   <th style=\"text-align:center;\"> s_hat </th>\n   <th style=\"text-align:center;\"> adjusted_s_bar </th>\n   <th style=\"text-align:center;\"> seasonally_adjusted </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Jan </td>\n   <td style=\"text-align:center;\"> 2017-01-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 1 </td>\n   <td style=\"text-align:center;\"> 3034 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">NA</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">-345.2</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3379.2</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Feb </td>\n   <td style=\"text-align:center;\"> 2017-02-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 2 </td>\n   <td style=\"text-align:center;\"> 2748 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">NA</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">-690.8</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3438.8</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Mar </td>\n   <td style=\"text-align:center;\"> 2017-03-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 3 </td>\n   <td style=\"text-align:center;\"> 3164 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">NA</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">-365.3</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3529.3</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Apr </td>\n   <td style=\"text-align:center;\"> 2017-04-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 4 </td>\n   <td style=\"text-align:center;\"> 3238 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">NA</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">-339.6</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3577.6</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 May </td>\n   <td style=\"text-align:center;\"> 2017-05-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 5 </td>\n   <td style=\"text-align:center;\"> 3416 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">NA</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">101.4</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3314.6</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Jun </td>\n   <td style=\"text-align:center;\"> 2017-06-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 6 </td>\n   <td style=\"text-align:center;\"> 3492 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">NA</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">282.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3209.5</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Jul </td>\n   <td style=\"text-align:center;\"> 2017-07-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 7 </td>\n   <td style=\"text-align:center;\"> 3730 </td>\n   <td style=\"text-align:center;\"> 3351.6 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">378.4</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">366.9</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3363.1</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Aug </td>\n   <td style=\"text-align:center;\"> 2017-08-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 8 </td>\n   <td style=\"text-align:center;\"> 3409 </td>\n   <td style=\"text-align:center;\"> 3350.0 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">59</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">326.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3082.5</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Sep </td>\n   <td style=\"text-align:center;\"> 2017-09-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 9 </td>\n   <td style=\"text-align:center;\"> 3572 </td>\n   <td style=\"text-align:center;\"> 3343.2 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">228.8</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">323.7</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3248.3</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Oct </td>\n   <td style=\"text-align:center;\"> 2017-10-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 10 </td>\n   <td style=\"text-align:center;\"> 3629 </td>\n   <td style=\"text-align:center;\"> 3326.2 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">302.8</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">367.2</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3261.8</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Nov </td>\n   <td style=\"text-align:center;\"> 2017-11-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 11 </td>\n   <td style=\"text-align:center;\"> 3408 </td>\n   <td style=\"text-align:center;\"> 3316.5 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">91.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">35.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3372.5</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 Dec </td>\n   <td style=\"text-align:center;\"> 2017-12-01 </td>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> 12 </td>\n   <td style=\"text-align:center;\"> 3391 </td>\n   <td style=\"text-align:center;\"> 3318.6 </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">72.4</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">-62.8</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #E69F00 !important;\">3453.8</span> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;\"> Year </th>\n   <th style=\"text-align:center;\"> Jan </th>\n   <th style=\"text-align:center;\"> Feb </th>\n   <th style=\"text-align:center;\"> Mar </th>\n   <th style=\"text-align:center;\"> Apr </th>\n   <th style=\"text-align:center;\"> May </th>\n   <th style=\"text-align:center;\"> Jun </th>\n   <th style=\"text-align:center;\"> Jul </th>\n   <th style=\"text-align:center;\"> Aug </th>\n   <th style=\"text-align:center;\"> Sep </th>\n   <th style=\"text-align:center;\"> Oct </th>\n   <th style=\"text-align:center;\"> Nov </th>\n   <th style=\"text-align:center;\"> Dec </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;\"> 2017 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">378.4</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">59</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">228.8</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">302.8</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">91.5</span> </td>\n   <td style=\"text-align:center;\"> 72.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2018 </td>\n   <td style=\"text-align:center;\"> -302.1 </td>\n   <td style=\"text-align:center;\"> -574 </td>\n   <td style=\"text-align:center;\"> -296.7 </td>\n   <td style=\"text-align:center;\"> -334.2 </td>\n   <td style=\"text-align:center;\"> 135.2 </td>\n   <td style=\"text-align:center;\"> 221.6 </td>\n   <td style=\"text-align:center;\"> 270.9 </td>\n   <td style=\"text-align:center;\"> 219.8 </td>\n   <td style=\"text-align:center;\"> 319.5 </td>\n   <td style=\"text-align:center;\"> 395.8 </td>\n   <td style=\"text-align:center;\"> -14.2 </td>\n   <td style=\"text-align:center;\"> -79.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2019 </td>\n   <td style=\"text-align:center;\"> -308.7 </td>\n   <td style=\"text-align:center;\"> -727.1 </td>\n   <td style=\"text-align:center;\"> -311.1 </td>\n   <td style=\"text-align:center;\"> -180.3 </td>\n   <td style=\"text-align:center;\"> 163 </td>\n   <td style=\"text-align:center;\"> 192 </td>\n   <td style=\"text-align:center;\"> 270.3 </td>\n   <td style=\"text-align:center;\"> 376 </td>\n   <td style=\"text-align:center;\"> 263.9 </td>\n   <td style=\"text-align:center;\"> 253.2 </td>\n   <td style=\"text-align:center;\"> 46 </td>\n   <td style=\"text-align:center;\"> -20.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2020 </td>\n   <td style=\"text-align:center;\"> -399.3 </td>\n   <td style=\"text-align:center;\"> -457.3 </td>\n   <td style=\"text-align:center;\"> -534.7 </td>\n   <td style=\"text-align:center;\"> -878.5 </td>\n   <td style=\"text-align:center;\"> -135.3 </td>\n   <td style=\"text-align:center;\"> 489.2 </td>\n   <td style=\"text-align:center;\"> 528.1 </td>\n   <td style=\"text-align:center;\"> 631.3 </td>\n   <td style=\"text-align:center;\"> 462.3 </td>\n   <td style=\"text-align:center;\"> 496.9 </td>\n   <td style=\"text-align:center;\"> -1.2 </td>\n   <td style=\"text-align:center;\"> -243.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> -390.8 </td>\n   <td style=\"text-align:center;\"> -1024.6 </td>\n   <td style=\"text-align:center;\"> -339 </td>\n   <td style=\"text-align:center;\"> 14.7 </td>\n   <td style=\"text-align:center;\"> 222.5 </td>\n   <td style=\"text-align:center;\"> 207.2 </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">Mean</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-350.2</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-695.8</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-370.4</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-344.6</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">96.3</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">277.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">361.9</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">321.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">318.6</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">362.2</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">30.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-67.8</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">Adjusted</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-345.2</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-690.8</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-365.4</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-339.6</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">101.3</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">282.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">366.9</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">326.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">323.6</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">367.2</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">35.5</span> </td>\n   <td style=\"text-align:center;\"> <span style=\"     color: #0072B2 !important;\">-62.8</span> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n:::",
    "supporting": [
      "chapter_1_lesson_4_class_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}