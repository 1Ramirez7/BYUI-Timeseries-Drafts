---
title: "TS_HW1.2"
format: 
  html:
    code-link: true
    code-fold: true
    code-tools: true
editor: visual
---

## Learning Objectives

1.1 Use technical language to describe the main features of time series data

1.3 Use R to describe key features of time series data.

1.4 Plot time series data to visualize trends, seasonal patterns, and potential outliers.

## Packages

```{r}
#| echo: false
library(ggplot2)
library(tsibble)
library(tsibbledata)
library(fable.prophet)
library(patchwork)
library(gtrendsR)
library(fredr)
library(tidyverse)
library(gtrendsR)
library(fabletools)
library(feasts)
fredr_set_key("a79732956d58c92b3cea088024b3c6c7")

```

## Access Data

Instructions on how to access the data science repository. Ideally, there is a central location where the data is stored and maintained for student's easy access.

### Google Trends Data: chocolate searches

```{r}
chocolate_raw <- gtrends(
keyword = "vacation",
geo = "",
time = "all",
low_search_volume = FALSE,
onlyInterest = TRUE
)

plot(chocolate_raw)



```

```{r}
# feasts::autoplot(chocolate_raw) +
#     labs(
#         y = "Index",
#         title = "World Wide Google Search Interest Index  "
#     )

head(chocolate_raw)
class(chocolate_raw)
#guess_frequency(chocolate_raw$date)
```

### Macroeconomic Data: unemployment rate

```{r}

unrate_raw <- fredr(
  series_id = "UNRATENSA",
  observation_start = as.Date("1900-01-01"),
  observation_end = as.Date("2050-01-01"),
  frequency = "m", # quarterly
  units = "lin" # change over previous value
)

unrate <- as_tsibble(unrate_raw, index=date)


#Deletes all colums other than specified, date and value

unrate <- unrate %>% select(date, value) 
  

```

### Financial Data: term premium (10 year)

```{r}

term_prem10_raw <- fredr(
  series_id = "THREEFYTP10",
  observation_start = as.Date("1900-01-01"),
  observation_end = as.Date("2050-01-01"),
  frequency = "m", # quarterly
  units = "lin" # change over previous value
)
  
term_prem10 <- as_tsibble(term_prem10_raw, index=date)

term_prem10 <- term_prem10 %>%
  select(date, value)

head(term_prem10)

autoplot(term_prem10) +
    labs(
        y = "Percent",
        title = "Term Premium on a 10 Year Zero Coupon Bond"
    )

```

## Data Background

The first part of any time series analysis is context. You can't analyze data without knowing what the data is measuring. Without context the most simple features of data appear obscure and inscrutable. This homework assignment will center around three data series, the US unemployment series, the term premium series, and the Google Trends series of the search term "chocolate." Please research them to understand the data collection process, unit of analysis, and meaning of each observation. Click on each of the subheadings below for a link to a source to get you started.

### [US unemployment](https://www.bls.gov/cps/cps_htgm.htm)

Your answer HERE on the data collection process, unit of analysis, and meaning of each observation.

### [The Term Premium](https://www.newyorkfed.org/research/data_indicators/term-premia-tabs#/overview)

Your answer HERE on the data collection process, unit of analysis, and meaning of each observation.

### [Chocolate Trends](https://support.google.com/trends/answer/4365533?hl=en)

Your answer HERE on the data collection process, and meaning of each observation.

## Plots, Trends, and Seasonal Variation

Please *contrast* the trends and seasonal features of the US unemployment, term premium, and the chocolate Google search series. Please include illustrations.

```{r}


head(unrate)
class(unrate)
guess_frequency(unrate$date)

ts_unrate_fig <- autoplot(
  summarise(
    index_by(unrate,year(date)),
    value = sum(value)/12
    )
  )

box_unrate_fig <- ggplot(unrate, aes(x = factor(month(date)), y = value)) + geom_boxplot()


ts_unrate_fig / box_unrate_fig
```

```{r}


```
