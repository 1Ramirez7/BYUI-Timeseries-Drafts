---
title: "Transformations and Non-Linear Models"
subtitle: "Chapter 5: Lesson 4"
format: html
editor: source
sidebar: false
---

```{r}
#| include: false
source("common_functions.R")
```

```{=html}
<script type="text/javascript">
 function showhide(id) {
    var e = document.getElementById(id);
    e.style.display = (e.style.display == 'block') ? 'none' : 'block';
 }
 
 function openTab(evt, tabName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
 }    
</script>
```


## Learning Outcomes

{{< include outcomes/chapter_5_lesson_4_outcomes.qmd >}}




## Preparation

-   Read Sections 5.7-5.8



## Learning Journal Exchange (10 min)

-   Review another student's journal

-   What would you add to your learning journal after reading another student's?

-   What would you recommend the other student add to their learning journal?

-   Sign the Learning Journal review sheet for your peer


## Class Activity: Simulate an Exponential Trend with a Seasonal Component (xxx min)

We will simulate code that has a seasonal component and impose an exponential trend.

```{r}
#| code-fold: true
#| code-summary: "Show the code"

n_months <- 96 # Number of months
mu <- 0
sigma <- .02

z_t <- rnorm(n = n_months, mean = mu, sd = sigma)

sim_df <- tibble(
  t = 1:n_months,
  x_t = exp(2 + 0.012 * t +
    0.03 * sin(2 * pi * t / 12) + 0.01 * cos(2 * pi * t / 12) + 
    0.01 * sin(2 * pi * 3.5 / 12) + 0.01 * cos(2 * pi * 1.75 / 12) +
    0.005 * sin(2 * pi * 7.5 / 12) + 0.0025 * cos(2 * pi * 8.5 / 12) +
    rnorm(n = n_months, mean = mu, sd = sigma)
  )
)

plot(sim_df$t, sim_df$x_t)
plot(sim_df$t, log(sim_df$x_t))

```





## Small Group Activity: SectionTitle (xxx min)
## Class Activity: SectionTitle (xxx min)


<!-- Check your Understanding -->

::: {.callout-tip icon=false title="Check Your Understanding"}

-   Question1
-   Question2

:::



## Small-Group Activity: Retail Sales (xxx min)

```{r}
#| label: retail1
# Read in retail sales data for "all other general merchandise stores"
retail_ts <- rio::import("data/retail_by_business_type.parquet") |>
  filter(naics == 45299) |>
  as_tsibble(index = month)

retail_ts |>
  autoplot(.vars = sales_millions) +
    labs(
      x = "Month",
      y = "Sales (Millions of U.S. Dollars)",
      title = paste0(retail_ts$business[1], " (", retail_ts$naics[1], ")")
    ) +
    theme_minimal() +
    theme(plot.title = element_text(hjust = 0.5))

```





## Homework Preview (5 min)

-   Review upcoming homework assignment
-   Clarify questions




::: {.callout-note icon=false}

## Download Homework

<a href="https://byuistats.github.io/timeseries/homework/homework_5_4.qmd" download="homework_5_4.qmd"> homework_5_4.qmd </a>

:::





<a href="javascript:showhide('Solutions1')"
style="font-size:.8em;">Class Activity</a>
  
::: {#Solutions1 style="display:none;"}
    

:::




<a href="javascript:showhide('Solutions')"
style="font-size:.8em;">Class Activity</a>
  
::: {#Solutions2 style="display:none;"}
    

:::




<a href="javascript:showhide('Solutions3')"
style="font-size:.8em;">Class Activity</a>
  
::: {#Solutions3 style="display:none;"}
    

:::



